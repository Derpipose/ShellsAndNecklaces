:root {
    --n: 5; /* number of images */
}

.gallery {
    --d: 10s; /* duration */

    display: grid;
    grid-template-columns: repeat(var(--n), 1fr);
    width: calc(220px * var(--n));
}

    .gallery > img {
        width: 100%;
        aspect-ratio: 1;
        object-fit: cover;
        border: 10px solid #f2f2f2;
        box-shadow: 0 0 4px #0007;
        animation: slide var(--d) infinite, z-order var(--d) infinite steps(1);
    }

        .gallery > img:nth-child(1) {
            --delay: calc((1 - 1) / var(--n) * var(--d));
            animation-delay: var(--delay);
            --r: calc(-20deg + /* random(40) is not a standard CSS function */ 1deg);
        }

        .gallery > img:nth-child(2) {
            --delay: calc((1 - 2) / var(--n) * var(--d));
            animation-delay: var(--delay);
            --r: calc(-20deg + /* random(40) is not a standard CSS function */ 1deg);
        }

        .gallery > img:nth-child(3) {
            --delay: calc((1 - 3) / var(--n) * var(--d));
            animation-delay: var(--delay);
            --r: calc(-20deg + /* random(40) is not a standard CSS function */ 1deg);
        }

        .gallery > img:nth-child(4) {
            --delay: calc((1 - 4) / var(--n) * var(--d));
            animation-delay: var(--delay);
            --r: calc(-20deg + /* random(40) is not a standard CSS function */ 1deg);
        }

        .gallery > img:nth-child(5) {
            --delay: calc((1 - 5) / var(--n) * var(--d));
            animation-delay: var(--delay);
            --r: calc(-20deg + /* random(40) is not a standard CSS function */ 1deg);
        }

@keyframes slide {
    50% {
        transform: translateX(120%) rotate(var(--r));
    }

    0%, 100%, calc(100% / var(--n)) {
        transform: translateX(0%) rotate(var(--r));
    }
}

@keyframes z-order {
    calc(50% / var(--n)), calc(100% / var(--n)) {
        z-index: 1;
    }

    calc(100% - calc(100% / var(--n))) {
        z-index: 2;
    }
}

@keyframes z-order-last {
    calc(50% / var(--n)), calc(100% / var(--n)) {
        z-index: 1;
    }

    calc(100% - calc(50% / var(--n))) {
        z-index: 2;
    }
}

body {
    margin: 0;
    min-height: 100vh;
    display: grid;
    place-content: center;
    background: #cdb380;
    overflow: hidden;
}
